<%= render "sidebar", itinerary: @itinerary %>
<div class="generator-container">
  <div class="left-container">
    <!-- days -->
    <% if params[:day].present? %>
      <%= render 'itineraries/day', day: @day %>
    <% else %>
      <% @itinerary.days.count do |day| %>
        <%= render 'itineraries/day', day: day %>
      <% end %>
    <% end %>
    <!-- content -->
    <div class="content-cards-container">
      <% if  params[:day].present? %>
        <% @day.contents.each do |content| %>
          <%= render 'content', content: content %>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="right-container" data-controller="filter">
    <!-- WORK IN PROGRESS -->
    <div class="card mb-3">
      <div class="card-body">
        <%= form_with url: itinerary_path(@itinerary), method: :get, class: "" do %>
          <div class="d-flex">
            <%= text_field_tag :query, params[:query], class: "form-control",placeholder: "search"%>
            <%= hidden_field_tag :day, params[:day] %>
            <%= button_tag type:"search", class:"btn btn-primary btn-tabinow ms-2" do  %>
              <i class="fa-solid fa-magnifying-glass"></i>
            <% end %>
          </div>
          <div class="filters-container">
            <div class="filter-pill selected" data-action="click->filter#filterHotels">Hotel</div>
            <div class="filter-pill selected" data-action="click->filter#filterActivities">Activity</div>
            <div class="filter-pill selected" data-action="click->filter#filterRestaurants">Restaurant</div>
            <!--
            <%= link_to 'Hotel', '#', class:"filter-pill selected", data: { action:"click->form#filter" } %>
            <%= link_to 'Activity', '#', class:"filter-pill", data: { action:"click->form#filter" }  %>
            <%= link_to 'Restaurant', '#', class:"filter-pill", data: { action:"click->form#filter" }  %>
            -->
          </div>
        <% end %>
      </div>
    </div>
    <div class="results-container">
      <% if params[:query].present? %>
        <% @contents.each do |content| %>
          <%= render 'result', content: content %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
